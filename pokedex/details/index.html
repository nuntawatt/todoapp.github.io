<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Pokedex Lab</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <style>
      .card {
        margin-bottom: 1rem;
        cursor: pointer;
      }
      .modal-body img {
        width: 100%;
        height: auto;
      }
      .load-more {
        margin-top: 1rem;
        text-align: center;
      }
      .btn-custom-green {
        background-color: #28a745; 
        border-color: #28a745; 
      }
      .btn-custom-green:hover {
        background-color: #218838; 
        border-color: #1e7e34; 
      }
      .btn-custom-type, .btn-custom-ability {
        margin: 0.2rem;
        border-radius: 0.25rem;
        color: #fff;
        border: none;
        font-size: 0.875rem; 
        padding: 0.5rem 1rem; 
        background-color: #000; 
        transition: background-color 0.3s ease;
      }
      .btn-custom-type:hover, .btn-custom-ability:hover {
        background: linear-gradient(45deg, #ff7f00, #ffff00, #8b00ff);
        background-size: 400% 400%;
        animation: rainbow 5s ease infinite;
        color: #fff; 
      }
      @keyframes rainbow {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      .button-container {
        display: flex;
        gap: 0.5rem;
      }
    </style>
</head>
<body>
<div class="container">
    <h1>Pokedex Lab</h1>
    <div id="name" class="row"></div>
    <div class="load-more">
        <button id="load-more-btn" class="btn btn-custom-green">Load More</button>
    </div>
</div>

<div class="modal fade" id="pokemonModal" tabindex="-1" aria-labelledby="pokemonModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="pokemonModalLabel">Pokémon Details</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <img id="pokemonImage" src="" alt="Pokemon Image">
        <h3 id="pokemonName"></h3>
        <p><strong>Height:</strong> <span id="pokemonHeight"></span></p>
        <p><strong>Weight:</strong> <span id="pokemonWeight"></span></p>
        <p><strong>Types:</strong> <span id="pokemonTypes" class="d-block button-container"></span></p>
        <p><strong>Stats:</strong> <span id="pokemonStats"></span></p>
        <p><strong>Abilities:</strong> <span id="pokemonAbilities" class="d-block button-container"></span></p>
      </div>
    </div>
  </div>
</div>

<script>
    let offset = 0;
    const limit = 20;

    document.addEventListener('DOMContentLoaded', (event) => {
        loadPokemon();

        document.getElementById('load-more-btn').addEventListener('click', () => {
            loadPokemon();
        });
    });

    function loadPokemon() {
        fetch(`https://pokeapi.co/api/v2/pokemon?offset=${offset}&limit=${limit}`)
        .then((res) => res.json())
        .then((data) => {
            const datas = data.results;
            const ele = document.getElementById("name");
            datas.forEach((element, index) => {
                const id = offset + index + 1;
                const img = `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${id}.png`;
                ele.innerHTML +=
                `<div class='col-6 col-md-4 col-lg-3'>
                    <div class='card' onclick='showPokemonDetails("${element.url}")'>
                        <img class='card-img-top' src='${img}' alt='Image of ${element.name}'>
                        <div class='card-body'>
                            <h5 class='card-title text-capitalize'>${element.name}</h5>
                        </div>
                    </div>
                </div>`;
            });
            offset += limit;
        })
        .catch((err) => console.error('Error loading Pokémon:', err));
    }

    function showPokemonDetails(url) {
        fetch(url)
        .then((res) => res.json())
        .then((data) => {
            document.getElementById('pokemonImage').src = data.sprites.other["official-artwork"].front_default;
            document.getElementById('pokemonName').innerText = data.name;
            document.getElementById('pokemonHeight').innerText = data.height / 10 + ' m';
            document.getElementById('pokemonWeight').innerText = data.weight / 10 + ' kg';

            let types = '';
            data.types.forEach(type => {
                types += `<button class="btn btn-custom-type btn-sm" onclick="window.location.href='type.html?url=${type.type.url}'">${type.type.name}</button> `;
            });
            document.getElementById('pokemonTypes').innerHTML = types;

            let stats = '';
            data.stats.forEach(stat => {
                stats += `${stat.stat.name}: ${stat.base_stat} <br>`;
            });
            document.getElementById('pokemonStats').innerHTML = stats;

            let abilities = '';
            data.abilities.forEach(ability => {
                abilities += `<button class="btn btn-custom-ability btn-sm" onclick="window.location.href='abilities.html?url=${ability.ability.url}'">${ability.ability.name}</button> `;
            });
            document.getElementById('pokemonAbilities').innerHTML = abilities;

            new bootstrap.Modal(document.getElementById('pokemonModal')).show();
        })
        .catch((err) => console.error('Error showing Pokémon details:', err));
    }
</script>

<script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous">
</script>
</body>
</html>
